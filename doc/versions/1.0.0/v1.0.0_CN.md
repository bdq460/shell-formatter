# Shell Formatter v1.0.0 - 功能列表

## 简化版本（用于 GitHub）

### 核心功能

- **智能格式化** - 使用 shfmt 自动格式化 Shell 脚本
- **错误检测** - 使用 shellcheck 检测语法和语义错误
- **自动诊断** - 打开/保存/编辑时自动检查（300ms 防抖）
- **快速修复** - 一键修复格式问题
- **插件系统** - 动态插件激活/停用
- **性能监控** - 内置性能指标

### 命令

- 格式化文档
- 修复所有问题
- 显示性能报告
- 重置性能指标
- 显示插件状态

### 支持的文件

- `.sh` - Shell 脚本
- `.bash` - Bash 脚本
- `.zsh` - Zsh 脚本

### 系统依赖

- VSCode >= 1.74.0
- shfmt（必需）
- shellcheck（推荐）

---

## 详细功能列表

### 📝 格式化功能

- **智能格式化** - 基于 `shfmt` 自动格式化 Shell 脚本，统一代码风格
- **全文档格式化** - 支持一键格式化整个文档
- **选中文本格式化** - 支持格式化选中的文本区域（自动裁剪选中部分）
- **缩进配置** - 灵活的缩进控制选项
  - 支持使用 VSCode 编辑器的缩进设置
  - 支持自定义空格数量
  - 支持忽略缩进验证

### 🔍 诊断功能

- **语法错误检测** - 基于 `shellcheck` 检测 Shell 脚本语法错误
- **语义错误检测** - 检测潜在的语义问题和最佳实践违规
- **格式问题检测** - 基于 `shfmt` 检测代码格式问题
- **自动诊断** - 自动触发诊断检查
  - 打开文件时
  - 保存文件时
  - 编辑文件时（300ms 防抖）
- **错误处理** - 可配置的错误处理策略
  - 显示问题
  - 忽略错误

### ⚡ 快速修复

- **单问题修复** - 点击黄色灯泡图标修复单个格式问题
- **批量修复** - 一键修复所有格式问题
- **Code Actions 集成** - 与 VSCode 原生 Quick Fix 功能无缝集成
- **命令面板支持** - 通过命令面板执行修复操作

### 🔧 插件系统

- **动态插件管理** - 配置驱动的插件激活/停用机制
- **shfmt 插件** - 独立的格式化插件，可单独启用/禁用
- **shellcheck 插件** - 独立的诊断插件，可单独启用/禁用
- **自定义工具路径** - 支持配置插件的可执行文件路径
- **插件状态查看** - 实时查看所有插件的激活状态和版本信息

### 📊 性能监控

- **内置性能指标收集** - 自动收集插件执行性能数据
  - 插件激活时间
  - 格式化执行时间
  - 诊断执行时间
- **性能报告** - 查看详细的性能指标报告
- **性能指标重置** - 支持重置性能统计数据
- **并行插件激活** - 优化的插件激活流程（40% 性能提升）

### 📋 日志系统

- **详细操作日志** - 记录所有关键操作
- **可配置日志级别** - 支持 debug、info、warn、error 四个级别
- **自定义日志格式** - 支持灵活的日志格式配置
  - 可用占位符：`%timestamp`、`%level`、`%name`、`%method`、`%line`、`%message`
- **日志开关** - 可随时启用或禁用日志记录

### 📂 文件支持

- **多文件类型支持** - 自动识别并格式化以下文件类型：
  - `.sh` - Shell 脚本
  - `.bash` - Bash 脚本
  - `.zsh` - Zsh 脚本

### ⚙️ 配置选项

- **完整配置支持** - 提供丰富的配置选项
- **实时配置更新** - 配置更改即时生效
- **配置验证** - 自动验证配置的有效性

### 🎯 用户命令

提供 5 个核心命令：

- `Format Document` - 格式化当前文档
- `Fix All Problems` - 修复所有问题
- `Show Performance Report` - 显示性能报告
- `Reset Performance Metrics` - 重置性能指标
- `Show Plugin Status` - 显示插件状态

### 🎨 用户体验

- **快捷键支持** - 兼容 VSCode 默认格式化快捷键
- **右键菜单** - 便捷的右键菜单操作入口
- **命令面板** - 通过命令面板快速访问所有功能
- **输出面板** - 在专用输出通道显示详细日志
- **问题面板** - 集成到 VSCode 问题的面板，统一显示错误和警告

---

## 系统要求

- **VSCode 版本**
  - VSCode >= 1.74.0

- **外部工具**
  - **shfmt**（必需）
    - Shell 脚本格式化工具
    - 安装：`brew install shfmt` (macOS) 或 `go install mvdan.cc/sh/v3/cmd/shfmt@latest`
  - **shellcheck**（推荐）
    - Shell 脚本静态分析工具
    - 安装：`brew install shellcheck` (macOS) 或 `go install github.com/koalaman/shellcheck/cmd/shellcheck@latest`

## 技术亮点

- **插件化架构** - 易于扩展的插件架构设计
- **依赖注入** - 通过 DI 容器实现代码解耦
- **防抖机制** - 300ms 防抖避免频繁触发
- **异步执行** - 异步执行不阻塞 UI
- **性能优化** - 提升用户体验的性能优化
